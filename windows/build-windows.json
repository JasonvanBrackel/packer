{
    "description": "The purpose of this packer template is to build updated virtual machines, with preloaded Windows Server Container images for Windows Server 1803",
    "variables": {
        "autounattend": "./answer_files/server_1803/Autounattend.xml",
        "disk_size": "61440",
        "disk_type_id": "1",
        "headless": "false",
        "iso_checksum": "1f396b448ae0a68e5a2f694b0afabb61498e20a5df38c874aacb4e940a661b61",
        "iso_checksum_type": "sha256",
        "iso_url": "https://download.my.visualstudio.com/db/en_windows_server_version_1803_updated_jan_2018_x64_dvd_100492040.iso",
        "manually_download_iso_from": "https://my.visualstudio.com/downloads?pid=2347",
        "restart_timeout": "5m",
        "vhv_enable": "false",
        "winrm_timeout": "2h"
    },
    "builders": [
        {
            "type": "hyperv-iso",
            "communicator" : "winrm",
            "enable_dynamic_memory": true,
            "enable_secure_boot": true,
            "generation": 1,
            "cpu": 2,
            "disk_size": "{{user `disk_size`}}",
            "enable_virtualization_extensions": true,
            "floppy_files": [
                "{{user `autounattend`}}",
                "./answer_files/unattend.xml",
                "./scripts/disable-screensaver.ps1",
                "./scripts/disable-winrm.ps1",
                "./scripts/enable-winrm.ps1",
                "./scripts/microsoft-updates.bat",
                "./scripts/win-updates.ps1",
                "./scripts/sysprep.bat"
            ],
            "guest_additions_mode": "disable",
            "iso_checksum": "{{user `iso_checksum`}}",
            "iso_checksum_type": "{{user `iso_checksum_type`}}",
            "iso_url": "{{user `iso_url`}}",
            "ram_size": 4096,
            "shutdown_command": "A:\\sysprep.bat",
            "vm_name": "WindowsServer1803",
            "winrm_password": "Packer",
            "winrm_timeout": "{{user `winrm_timeout`}}",
            "winrm_username": "Packer"
        }
    ]
}